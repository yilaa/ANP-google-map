<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ANP visitantes</title>
  <style>
    #map{
      height: 100%;
    }
    #legend {
        font-family: Arial, sans-serif;
        background: #fff;
        padding: 10px;
        margin: 10px;
        border: 3px solid #000;
      }
     #legend h3 {
        margin-top: 0;
      }
    #title-map {
      margin: 10px 10px 0 0;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        background-color: #fff;
        font-family: Roboto;
      }
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="title-map"><h1>ANP visitantes</h1></div>
  <div id="legend"><h3>Legend</h3></div>
  <script>
    function initMap(){
     // Estilo del mapa
     var styledMapType = new google.maps.StyledMapType(
     [
  {
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#f5f5f5"
      }
    ]
  },
  {
    "elementType": "labels.icon",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#616161"
      }
    ]
  },
  {
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#f5f5f5"
      }
    ]
  },
  {
    "featureType": "administrative.country",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#a59827"
      },
      {
        "weight": 1.5
      }
    ]
  },
  {
    "featureType": "administrative.country",
    "elementType": "geometry.stroke",
    "stylers": [
      {
        "color": "#a59827"
      },
      {
        "visibility": "on"
      }
    ]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#bdbdbd"
      }
    ]
  },
  {
    "featureType": "administrative.province",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#a59827"
      },
      {
        "visibility": "on"
      },
      {
        "weight": 8
      }
    ]
  },
  {
    "featureType": "administrative.province",
    "elementType": "geometry.stroke",
    "stylers": [
      {
        "color": "#a59827"
      },
      {
        "visibility": "on"
      },
      {
        "weight": 1.5
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#eeeeee"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#e5e5e5"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#ffffff"
      }
    ]
  },
  {
    "featureType": "road.arterial",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.arterial",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#dadada"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#616161"
      }
    ]
  },
  {
    "featureType": "road.local",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.local",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  },
  {
    "featureType": "transit.line",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#e5e5e5"
      }
    ]
  },
  {
    "featureType": "transit.station",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#eeeeee"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#c9c9c9"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#84aac6"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  }
],
{name: 'Styled Map'});
      
      var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -9.900395, lng: -76.227201},
          zoom: 6,
          mapTypeControl: false
        });
     
     //Associate the styled map with the MapTypeId and set it to display.
        map.mapTypes.set('styled_map', styledMapType);
        map.setMapTypeId('styled_map');
    

      // Add geojson
      map.data.loadGeoJson('ANP_puntos_data.geojson');
      
      //Add marker
      map.data.setStyle(function(feature) {
      if (parseFloat(feature.getProperty('Total 2018'))>1000){
          var tot2018 = Math.sqrt(parseFloat(feature.getProperty('Total 2018')))*0.05;
          } else {
          var tot2018 =1.5;
          };
      if (parseFloat(feature.getProperty('Total 2018'))>300000){
          var color="#cc4c02";
          var opacidad=0.80;
          var circulo="#cc4c02";
          } else if (parseFloat(feature.getProperty('Total 2018'))>100000){
          var color="#f2a13f";
          var opacidad=0.90;
          var circulo="#f2a13f";
          } else if (parseFloat(feature.getProperty('Total 2018'))>50000){
          var color="#fadd98";
          var opacidad=1;
          var circulo="#fadd98";
          } else {
          var color="#f00";
          var opacidad=0.50;
          var circulo="#f00";
          };
          return /** @type {google.maps.Data.StyleOptions} */({
            icon: {
              path: google.maps.SymbolPath.CIRCLE,
              scale: tot2018,
              fillColor: color,
              fillOpacity: opacidad,
              strokeColor: circulo,
              strokeWeight: 0.5
        }
       });
      });
      var infowindow = new google.maps.InfoWindow();
      // Set mouseover event for each feature.
        map.data.addListener('mouseover', function(event) {
          var anp = event.feature;
          var contenido = "<b>"+anp.getProperty('name')+"</b><br>"+"Total 2018: "+anp.getProperty('Total 2018')+"</b><br>"+"Extranjeros 2018: "+anp.getProperty('% Extranjeros 2018')+"</b><br>"+"Nacionales 2018: "+anp.getProperty('% Nacionales 2018');
          infowindow.setContent(contenido);
          infowindow.setPosition(event.latLng);
          infowindow.open(map);
         });
     
    }
  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpL3r9VTtiSnTUOJbOC4M7CWemLr0cEiA&callback=initMap">
    </script>
</body>
</html>

